  # Set AC to on + cool + auto fan
  bedtime_ac:
    alias: Bedroom AC Cool
    sequence:
      - service: switch.broadlink_send_packet_192_168_131_4
        data:
          packet:
            - JgBgAAABJJUTEREUEBQTNxMRExIQFBEUEzYTERE5ExEROBM3EzYQORE4ERQQFBEUEDkRFBAUERQQFBE4EjYTNhIUETkQORA5EAAFOQABIk0RAAxBAAEiShIADEEAASFLEwANBQAAAAAAAAAA
            - JgBQAAABJ5MTEhISExISNxITEhISExISEjgSEhI3ExISNxI3EjcTNxI3EhMSEhI3ExISEhMSEhITEhI3EzcTERI3EzcSNxM2EwAFNwABJEoTAA0FAAAAAAAAAAA=
            - JgBgAAABIJYTERAVExETNhMSEBQTEhMREzcTERM2ExIQORM2EzYTNxE4EzYTNhM2ExITERQRExERFBAUFBETERE5EzYTNhE4EwAFNgABIkwTAAw/AAEhTBMADD4AASFMEAANBQAAAAAAAAAA
  livingroom_fan_on:
    alias: Living Room Fan Power
    sequence:
        - service: remote.turn_on
          data:
            activity: PowerToggle
  livingroom_fan_osc:
    alias: Living Room Fan Oscillate
    sequence:
        - service: remote.turn_on
          data:
            activity: Oscillation
  livingroom_fan_speed:
    alias: Living Room Fan Speed
    sequence:
        - service: remote.turn_on
          data:
            activity: FanSpeed        
  # Harmony Hub
  watch_activity:
    alias: Switch Activity
    sequence:
      - service: remote.turn_on
        data_template:
          activity: >
            {% if media_activity == "Cody" or media_activity == "cody" %}
              31479535
            {% elif media_activity == "Hulu" or media_activity == "hulu" %}
              31949557
            {% elif media_activity == "Sling" or media_activity == "sling" %}
              31480008
            {% elif media_activity == "Netflix" or media_activity == "netflix" %}
              31478989
            {% elif media_activity == "Amazon" or media_activity == "amazon" %}
              31480109
            {% elif media_activity == "Plex" or media_activity == "plex" %}
              31571897
            {% elif media_activity == "switch" %}
              31480190
            {% elif media_activity == "over_the_air" %}
              31480260
            {% endif %} 
  media_off:
    alias: TV Off
    sequence:
      - service: remote.turn_on
        data:
          activity: -1
  media_volume_up:
    alias: TV Volume Up
    sequence:
      - service: remote.send_command
        data_template:
          device: 51736886
          command: VolumeUp
          num_repeats: 2
  alexa_volume_up:
    sequence:
      - service: remote.send_command
        data_template:
          device: 51736886
          command: VolumeUp
          num_repeats: >
            {{ amount }}
  media_volume_down:
    alias: TV Volume Down
    sequence:
      - service: remote.send_command
        data:
          device: 51736886
          command: VolumeDown
          num_repeats: 2
  alexa_volume_down:
    sequence:
      - service: remote.send_command
        data_template:
          device: 51736886
          command: VolumeDown
          num_repeats: >
            {{ amount }}
  media_stop:
    alias: TV Stop
    sequence:
      - service: remote.send_command
        data_template:
          device: >
            {% if states.remote.living_room.attributes.current_activity == "Watch Kodi" %}
              51738178
            {% else %}
              51736885
            {% endif %}
          command: >
            {% if states.remote.living_room.attributes.current_activity == "Watch Kodi" %}
              Stop
            {% else %}
              Exit
            {% endif %}
          num_repeats: 1
  media_pause:
    alias: TV Pause
    sequence:
      - service: remote.send_command
        data_template:
          device: >
            {% if states.remote.living_room.attributes.current_activity == "Watch Kodi" %}
              51738178
            {% else %}
              51736885
            {% endif %}
          command: Pause
          num_repeats: 1
  media_play:
    alias: TV Play
    sequence:
      - service: remote.send_command
        data_template:
          device: >
            {% if states.remote.living_room.attributes.current_activity == "Watch Kodi" %}
              51738178
            {% else %}
              51736885
            {% endif %}
          command: Play
          num_repeats: 1
  media_confirm:
    alias: TV Confirm
    sequence:
      - service: remote.send_command
        data_template:
          device: >
            {% if states.remote.living_room.attributes.current_activity == "Watch Kodi" %}
              51738178
            {% else %}
              51736885
            {% endif %}
          command: >
            {% if states.remote.living_room.attributes.current_activity == "Watch Kodi" %}
              Enter
            {% else %}
              OK
            {% endif %}
          num_repeats: 1
  media_skip_back:
    alias: TV Skip Back
    sequence:
      - service: remote.send_command
        data_template:
          device: >
            {% if states.remote.living_room.attributes.current_activity == "Watch Kodi" %}
              51738178
            {% else %}
              51736885
            {% endif %}
          command: >
            {% if states.remote.living_room.attributes.current_activity == "Watch Kodi" %}
              DirectionLeft
            {% else %}
              InstantReplay
            {% endif %}
          num_repeats: >
            {% if states.remote.living_room.attributes.current_activity == "Watch Kodi" %}
              2
            {% else %}
              1
            {% endif %}
  media_input1:
    alias: TV Input Kodi
    sequence:
      - service: remote.send_command
        data_template:
          device: 51736886
          command: InputHdmi1
          num_repeats: 1
  media_input2:
    alias: TV Input Switch
    sequence:
      - service: remote.send_command
        data_template:
          device: 51736886
          command: InputHdmi2
          num_repeats: 1
  media_input3:
    alias: TV Input Roku
    sequence:
      - service: remote.send_command
        data_template:
          device: 51736886
          command: InputHdmi3
          num_repeats: 1