  # Set AC to on + cool + auto fan
  bedtime_ac_cool_auto:
    alias: Bedroom AC Cool
    sequence:
      - service: switch.broadlink_send_packet_192_168_131_4
        data:
          packet:
            - "JgBgAAABJJUTEREUEBQTNxMRExIQFBEUEzYTERE5ExEROBM3EzYQORE4ERQQFBEUEDkRFBAUERQQFBE4EjYTNhIUETkQORA5EAAFOQABIk0RAAxBAAEiShIADEEAASFLEwANBQAAAAAAAAAA"
            - "JgBQAAABJ5MTEhISExISNxITEhISExISEjgSEhI3ExISNxI3EjcTNxI3EhMSEhI3ExISEhMSEhITEhI3EzcTERI3EzcSNxM2EwAFNwABJEoTAA0FAAAAAAAAAAA="
            - "JgBgAAABIJYTERAVExETNhMSEBQTEhMREzcTERM2ExIQORM2EzYTNxE4EzYTNhM2ExITERQRExERFBAUFBETERE5EzYTNhE4EwAFNgABIkwTAAw/AAEhTBMADD4AASFMEAANBQAAAAAAAAAA"
  bedtime_ac_power:
    alias: Bedroom AC Power Toggle
    sequence:
      - service: switch.broadlink_send_packet_192_168_131_4
        data:
          packet:
            - "JgBYAAABI5YQFBEUEBUQORAVEBQQFRAUETkQFBE5EBQRORA5EDkRORA5ERQQFRAUEDkRFBAVEBQRFBA5ETkQOREUEDkRORA5EAAFPQABJUoQAAxLAAEhTBEADQU="
  bedtime_ac_temp_timer_up:
    alias: Bedroom AC Temp/Timer Up
    sequence:
      - service: switch.broadlink_send_packet_192_168_131_4
        data:
          packet:
            - "JgBQAAABJZMRExMSEBUSNxISEhMRFBISEzcRExE5ERMRORE4ETgSOBETETkROBE4EhMRFBAUERQROBEUEBQRFBA5EjgROBE4EgAFOwABIkwUAA0FAAAAAAAAAAA="
  bedtime_ac_temp_timer_down:
    alias: Bedroom AC Temp/Timer Down
    sequence:
      - service: switch.broadlink_send_packet_192_168_131_4
        data:
          packet:
            - "JgBQAAABI5YRExITEBQSOBETEhMRFBETEjgRExE5ERMROBE5ETgSOBE4ERQROBE4EhMRFBETERQRExI4ERMSExA5EjgROBE4EgAFOwABIk0RAA0FAAAAAAAAAAA="
  bedtime_ac_fan_faster:
    alias: Bedroom AC Fan Faster
    sequence:
      - service: switch.broadlink_send_packet_192_168_131_4
        data:
          packet:
            - "JgBQAAABJJQQFRAUERQQOREUERMRFBETETkRExE5ERMROBI4EjgROBE4EhMQFRAUERQQFBEUEBUQFBE5ETgROBI4ETgSOBE4EQAFOwABI0wSAA0FAAAAAAAAAAA="
  bedtime_ac_fan_slower:
    alias: Bedroom AC Fan Slower
    sequence:
      - service: switch.broadlink_send_packet_192_168_131_4
        data:
          packet:
            - "JgBQAAABJZURExEUEBQRORETERQQFBEUEDkSExA5EhMQORM3ETgSOBMRERQQORITEBQUERAVExERORM2EBUQORM2EzcTNhM2EgAFOwABIk0TAA0FAAAAAAAAAAA="
  bedtime_ac_cool:
    alias: Bedroom AC Cool
    sequence:
      - service: switch.broadlink_send_packet_192_168_131_4
        data:
          packet:
            - "JgBQAAABIpURExEUERQROBEUERMSExETEjgRExI4ERMSOBE4EjgROBE4EhMRFBE4ERQRExITERMSExE4EjgRExE5ETgSOBA5EQAFOwABI00RAA0FAAAAAAAAAAA="
  bedtime_ac_energy_saver:
    alias: Bedroom AC Energy Saver
    sequence:
      - service: switch.broadlink_send_packet_192_168_131_4
        data:
          packet:
            - "JgBQAAABJ5QRExEUEBUROBEUEBQRFBETETkRExI4ERMRORE4ETkROBEUETgRFBETERQRExEUERQQOREUETgROBI4EzYSOBE4EQAFPAABI0wRAA0FAAAAAAAAAAA="
  bedtime_ac_fan_only:
    alias: Bedroom AC Fan Only
    sequence:
      - service: switch.broadlink_send_packet_192_168_131_4
        data:
          packet:
            - "JgBQAAABJJQSExETERQROBITERQRExEUEDkSExE4EhMQORI4ETgROBI4ETgSOBETEhMRExEUERQRExEUERMRORE4EjgROBE4EQAFPAABIk0RAA0FAAAAAAAAAAA="
  bedtime_ac_sleep:
    alias: Bedroom AC Sleep
    sequence:
      - service: switch.broadlink_send_packet_192_168_131_4
        data:
          packet:
            - "JgBQAAABIpYRExEUEBQRORETERQQFRAUETkQFBE5ERMRORE4ETgTNxE4ETkROBE4EhMRFBETERQQFRAUERQTERE5ETgTNxE4EQAFPAABIk0TAA0FAAAAAAAAAAA="
  bedtime_ac_auto_fan:
    alias: Bedroom AC Auto Fan
    sequence:
      - service: switch.broadlink_send_packet_192_168_131_4
        data:
          packet:
            - "JgBQAAABI5IUExEUEBQRORETERQQFBEUEDkSExM2EhMQORI4ETgTNxETETkROBEUERMRFBAVEBQRORETERQQORM3ETgROBQ2EQAFPAABIk0RAA0FAAAAAAAAAAA="
  bedtime_ac_timer:
    alias: Bedroom AC Timer
    sequence:
      - service: switch.broadlink_send_packet_192_168_131_4
        data:
          packet:
            - "JgBQAAABJpQSExEUEBQSOBETEhMRExEUETgSExE4EhMRORA5EDkSOBAUEjgRNxIUEBQRFBEUERMRORETEhMROBI4ETgSOBE4EQAFPAABIk0RAA0FAAAAAAAAAAA="
  livingroom_fan_on:
    alias: Living Room Fan Power
    sequence:
        - service: remote.send_command
          entity_id: remote.living_room
          data:
            device: 55184762
            command: PowerToggle
  livingroom_fan_osc:
    alias: Living Room Fan Oscillate
    sequence:
        - service: remote.send_command
          entity_id: remote.living_room
          data:
            device: 55184762
            command: Oscillation
  livingroom_fan_speed:
    alias: Living Room Fan Speed
    sequence:
        - service: remote.send_command
          entity_id: remote.living_room
          data:
            device: 55184762
            command: FanSpeed        
  # Harmony Hub
  kodi_delete:
    alias: Delete
    sequence:
      - service: remote.send_command
        entity_id: remote.living_room
        data_template:
          device: 51738178
          command: "Delete"
      - service: remote.send_command
        entity_id: remote.living_room
        data_template:
          device: 51738178
          command: "DirectionLeft"
      - service: remote.send_command
        entity_id: remote.living_room
        data_template:
          device: 51738178
          command: "Enter"
      - service: remote.send_command
        entity_id: remote.living_room
        data_template:
          device: 51738178
          command: "DirectionLeft"
      - service: remote.send_command
        entity_id: remote.living_room
        data_template:
          device: 51738178
          command: "Enter"
  watch_activity:
    alias: Switch Activity
    sequence:
      - service: remote.turn_on
        entity_id: remote.living_room
        data_template:
          activity: >
            {% if media_activity == "Cody" or media_activity == "cody" %}
              31479535
            {% elif media_activity == "Hulu" or media_activity == "hulu" %}
              31949557
            {% elif media_activity == "Sling" or media_activity == "sling" %}
              31480008
            {% elif media_activity == "Netflix" or media_activity == "netflix" %}
              31478989
            {% elif media_activity == "Amazon" or media_activity == "amazon" %}
              31480109
            {% elif media_activity == "Plex" or media_activity == "plex" %}
              31571897
            {% elif media_activity == "switch" %}
              31480190
            {% elif media_activity == "over_the_air" %}
              31480260
            {% elif media_activity == "music" %}
              38156985
            {% endif %}
  media_confirm:
    alias: TV Confirm
    sequence:
      - service: remote.send_command
        entity_id: remote.living_room
        data_template:
          device: >
            {% if states.remote.living_room.attributes.current_activity == "Watch Kodi" %}
              51738178
            {% else %}
              51736885
            {% endif %}
          command: >
            {% if states.remote.living_room.attributes.current_activity == "Watch Kodi" %}
              Enter
            {% else %}
              OK
            {% endif %}
          num_repeats: 1
  media_off:
    alias: TV Off
    sequence:
      - service: remote.turn_on
        entity_id: remote.living_room
        data:
          activity: -1
  media_volume_up:
    alias: TV Volume Up
    sequence:
      - service: remote.send_command
        entity_id: remote.living_room
        data_template:
          device: 60888940
          command: VolumeUp
          num_repeats: 1
  alexa_volume_up:
    sequence:
      - service: remote.send_command
        entity_id: remote.living_room
        data_template:
          device: 60888940
          command: VolumeUp
          num_repeats: >
            {{ amount }}
  media_volume_down:
    alias: TV Volume Down
    sequence:
      - service: remote.send_command
        entity_id: remote.living_room
        data:
          device: 60888940
          command: VolumeDown
          num_repeats: 1
  alexa_volume_down:
    sequence:
      - service: remote.send_command
        entity_id: remote.living_room
        data_template:
          device: 60888940
          command: VolumeDown
          num_repeats: >
            {{ amount }}
  media_stop:
    alias: TV Stop
    sequence:
      - service: remote.send_command
        entity_id: remote.living_room
        data_template:
          device: >
            {% if states.remote.living_room.attributes.current_activity == "Watch Kodi" %}
              51738178
            {% else %}
              51736885
            {% endif %}
          command: >
            {% if states.remote.living_room.attributes.current_activity == "Watch Kodi" %}
              Stop
            {% else %}
              Back
            {% endif %}
          num_repeats: 1
  media_pause:
    alias: TV Pause
    sequence:
      - service: remote.send_command
        entity_id: remote.living_room
        data_template:
          device: >
            {% if states.remote.living_room.attributes.current_activity == "Watch Kodi" %}
              51738178
            {% else %}
              51736885
            {% endif %}
          command: >
            Pause
          num_repeats: 1
  media_play:
    alias: TV Play
    sequence:
      - service: remote.send_command
        entity_id: remote.living_room
        data_template:
          device: >
            {% if states.remote.living_room.attributes.current_activity == "Watch Kodi" %}
              51738178
            {% else %}
              51736885
            {% endif %}
          command: >
            Play
          num_repeats: 1
  media_skip_back:
    alias: TV Skip Back
    sequence:
    - service: remote.send_command
      entity_id: remote.living_room
      data_template:
        device: >
          {% if states.remote.living_room.attributes.current_activity == "Watch Kodi" %}
            51738178
          {% else %}
            51736885
          {% endif %}
        command: >
          {% if states.remote.living_room.attributes.current_activity == "Watch Kodi"
            or states.remote.living_room.attributes.current_activity == "Watch Sling"
            or  states.remote.living_room.attributes.current_activity == "Watch Hulu"
            or  states.remote.living_room.attributes.current_activity == "Watch Plex"
            or states.remote.living_room.attributes.current_activity == "Watch Netflix" %}
            DirectionLeft
          {% elif states.remote.living_room.attributes.current_activity == "Watch Youtube" %}
            Rewind
          {% else %}
            InstantReplay
          {% endif %}
        num_repeats: >
          {% if states.remote.living_room.attributes.current_activity == "Watch Kodi" %}
            2
          {% elif states.remote.living_room.attributes.current_activity == "Watch Amazon" %}
            4
          {% else %}
            6
          {% endif %}
    - service: remote.send_command
      entity_id: remote.living_room
      data_template:
        device: >
          {% if states.remote.living_room.attributes.current_activity == "Watch Kodi" %}
            51738178
          {% else %}
            51736885
          {% endif %}
        command: >
          {% if states.remote.living_room.attributes.current_activity == "Watch Kodi" %}
            DirectionLeft
          {% elif states.remote.living_room.attributes.current_activity == "Watch Plex"
            or  states.remote.living_room.attributes.current_activity == "Watch Hulu"
            or states.remote.living_room.attributes.current_activity == "Watch Netflix"
            or states.remote.living_room.attributes.current_activity == "Watch Youtube" %}
            Play
          {% endif %}
        num_repeats: 1
  alexa_goodnight:
    alias: Say Goodnight
    sequence:
    - service: switch.turn_off
      entity_id: switch.couch_lamp
    - service: light.turn_off
      entity_id: light.love_seat_middle
    - service: light.turn_off
      entity_id: light.love_seat_up
    - service: script.toggle
      entity_id: script.media_off
    - service: switch.turn_on
      entity_id: switch.bonnie_bedroom_lamp
    - service: switch.turn_on
      entity_id: switch.derek_bedroom_lamp
    - delay: '00:00:30'
    - service: light.turn_on
      data:
        entity_id: light.the_sink_hole
        brightness: 1
  media_input1:
    alias: TV Input Kodi
    sequence:
    - service: remote.send_command
      entity_id: remote.living_room
      data_template:
        device: 51736886
        command: InputHdmi1
        num_repeats: 1
  media_input2:
    alias: TV Input Switch
    sequence:
    - service: remote.send_command
      entity_id: remote.living_room
      data_template:
        device: 51736886
        command: InputHdmi2
        num_repeats: 1
  media_input3:
    alias: TV Input Roku
    sequence:
    - service: remote.send_command
      entity_id: remote.living_room
      data_template:
        device: 51736886
        command: InputHdmi3
        num_repeats: 1