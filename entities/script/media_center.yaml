# Changes the activity based on a passed media_activity value
media_activity:
  alias: Switch Activity
  sequence:
  - service: remote.turn_on
    entity_id: remote.living_room
    data_template:
      activity: >
        {%- if media_activity|lower == "kodi" or media_activity|lower == "cody" -%}
          31479535
        {%- elif media_activity|lower == "hulu" -%}
          31949557
        {%- elif media_activity|lower == "sling" -%}
          31480008
        {%- elif media_activity|lower == "netflix" -%}
          31478989
        {%- elif media_activity|lower == "amazon" -%}
          31480109
        {%- elif media_activity|lower == "plex" -%}
          31571897
        {%- elif media_activity|lower == "switch" -%}
          31480190
        {%- elif media_activity|lower == "spotify" -%}
          41363814
        {%- elif media_activity|lower == "over_the_air" -%}
          31480260
        {%- elif media_activity|lower == "music" -%}
          38156985
        {%- else -%}
          31571897
        {% endif %}
# Press the OK button
media_confirm:
  alias: TV Confirm
  sequence:
  - service: remote.send_command
    entity_id: remote.living_room
    data_template:
      device: >
        {{ states("sensor.living_room_media_device_id") }}
      command: >
        {%- if states("sensor.living_room_media_device") == "htpc" -%}
          Enter
        {%- else -%}
          OK
        {%- endif -%}
      num_repeats: >
        {%- if increment is defined -%}
          {{ increment | int }}
        {%- else -%}
          1
        {%- endif -%}
# Skitting forward a bunch seconds in youtube for critical role breaks.
media_cr_break:
  alias: CR FF
  sequence:
  - service: remote.send_command
    entity_id: remote.living_room
    data:
      device: 63164007
      command: FastForward
      num_repeats: 80
  - service: remote.send_command
    entity_id: remote.living_room
    data:
      device: 63164007
      command: OK
      num_repeats: 1
# Turn the TV on or off. On defaults to Plex.
media_on_off:
  alias: TV On and Off
  sequence:
  - service: remote.turn_on
    entity_id: remote.living_room
    data_template:
      activity: >
        {%- if on_off is defined -%}
          {%- if on_off == "on" -%}
            31571897
          {%- else -%}
            -1
          {%- endif -%}
        {%- else -%}
          {%- if states('sensor.living_room_remote_state') == "off" -%}
            31571897
          {%- else -%}
            -1
          {%- endif -%}
        {% endif -%}
media_pause:
  alias: TV Pause
  sequence:
  - service: remote.send_command
    entity_id: remote.living_room
    data_template:
      device: >
        {{ states("sensor.living_room_media_device_id") }}
      command: Pause
      num_repeats: >
        {%- if increment is defined -%}
          {{ increment | int }}
        {%- else -%}
          1
        {%- endif -%}
media_play:
  alias: TV Play
  sequence:
  - service: remote.send_command
    entity_id: remote.living_room
    data_template:
      device: >
        {{ states("sensor.living_room_media_device_id") }}
      command: Play
      num_repeats: >
        {%- if increment is defined -%}
          {{ increment | int }}
        {%- else -%}
          1
        {%- endif -%}
media_rewind:
  alias: TV Rewind
  sequence:
  - service: remote.send_command
    entity_id: remote.living_room
    data_template:
      device: >
        {{ states("sensor.living_room_media_device_id") }}
      command: >
          {% if states("sensor.living_room_remote_state") == "Kodi"
            or states("sensor.living_room_remote_state") == "Sling"
            or  states("sensor.living_room_remote_state") == "Hulu"
            or  states("sensor.living_room_remote_state") == "Plex"
            or states("sensor.living_room_remote_state") == "Netflix" %}
            DirectionLeft
          {% elif states("sensor.living_room_remote_state") == "Youtube" %}
            Rewind
          {% else %}
            InstantReplay
          {% endif %}
      num_repeats: >
          {%- if increment is defined -%}
            {{ increment | int }}
          {%- else -%}
            1
          {%- endif -%}
media_fast_forward:
  alias: TV Fast Forward
  sequence:
  - service: remote.send_command
    entity_id: remote.living_room
    data_template:
      device: >
        {{ states("sensor.living_room_media_device_id") }}
      command: >
          {% if states("sensor.living_room_remote_state") == "Kodi"
            or states("sensor.living_room_remote_state") == "Sling"
            or  states("sensor.living_room_remote_state") == "Hulu"
            or  states("sensor.living_room_remote_state") == "Plex"
            or states("sensor.living_room_remote_state") == "Netflix" %}
            DirectionRight
          {% elif states("sensor.living_room_remote_state") == "Youtube" %}
            FastForward
          {% endif %}
      num_repeats: >
          {%- if increment is defined -%}
            {{ increment | int }}
          {%- else -%}
            1
          {%- endif -%}
media_input1:
  alias: TV Input Kodi
  sequence:
  - service: remote.send_command
    entity_id: remote.living_room
    data_template:
      device: 51736886
      command: InputHdmi1
      num_repeats: 1
media_input2:
  alias: TV Input Roku
  sequence:
  - service: remote.send_command
    entity_id: remote.living_room
    data_template:
      device: 51736886
      command: InputHdmi2
      num_repeats: 1
media_input3:
  alias: TV Input Switch
  sequence:
  - service: remote.send_command
    entity_id: remote.living_room
    data_template:
      device: 51736886
      command: InputHdmi3
      num_repeats: 1
# Performs a 1 minute rewind
media_skip_back:
  alias: TV Skip Back
  sequence:
  - service: remote.send_command
    entity_id: remote.living_room
    data_template:
      device: >
        {{ states("sensor.living_room_media_device_id") }}
      command: >
        {%- if states("sensor.living_room_remote_state") == "Kodi"
          or states("sensor.living_room_remote_state") == "Sling"
          or  states("sensor.living_room_remote_state") == "Hulu"
          or  states("sensor.living_room_remote_state") == "Plex"
          or states("sensor.living_room_remote_state") == "Netflix" -%}
          DirectionLeft
        {%- elif states("sensor.living_room_remote_state") == "Youtube" -%}
          Rewind
        {%- else -%}
          InstantReplay
        {%- endif -%}
      num_repeats: >
        {%- if states("sensor.living_room_remote_state") == "Kodi" -%}
          2
        {%- elif states("sensor.living_room_remote_state") == "Amazon" -%}
          4
        {%- else -%}
          6
        {%- endif -%}
  - service: remote.send_command
    entity_id: remote.living_room
    data_template:
      device: >
        {%- if states("sensor.living_room_media_device") == "htpc" -%}
          51738178
        {%- else -%}
          63164007
        {%- endif -%}
      command: >
        {%- if states("sensor.living_room_remote_state") == "Kodi" -%}
          DirectionLeft
        {%- elif states("sensor.living_room_remote_state") == "Plex"
          or  states("sensor.living_room_remote_state") == "Hulu"
          or states("sensor.living_room_remote_state") == "Netflix"
          or states("sensor.living_room_remote_state") == "Youtube" -%}
          Play
        {%- endif -%}
      num_repeats: >
        {%- if states("sensor.living_room_remote_state") == "Kodi" -%}
          2
        {%- else -%}
          1
        {%- endif -%}
media_stop:
  alias: TV Stop
  sequence:
  - service: remote.send_command
    entity_id: remote.living_room
    data_template:
      device: >
        {{ states("sensor.living_room_media_device_id") }}
      command: >
        {%- if states("sensor.living_room_media_device") == "htpc" -%}
          Stop
        {%- else -%}
          Back
        {%- endif -%}
      num_repeats: >
        {%- if increment is defined -%}
          {{ increment | int }}
        {%- else -%}
          1
        {%- endif -%}
media_volume_up:
  alias: TV Volume Up
  sequence:
  - service: remote.send_command
    entity_id: remote.living_room
    data_template:
      device: 60888940
      command: VolumeUp
      num_repeats: >
        {%- if increment is defined -%}
          {{ increment | int }}
        {%- else -%}
          1
        {%- endif -%}
media_volume_down:
  alias: TV Volume Down
  sequence:
  - service: remote.send_command
    entity_id: remote.living_room
    data_template:
      device: 60888940
      command: VolumeDown
      num_repeats: >
        {%- if increment is defined -%}
          {{ increment | int }}
        {%- else -%}
          1
        {%- endif -%}