# THE MOON!!!
  - platform: moon

# Ring Doorbell
  - platform: ring

# Weather Prediction
  - platform: darksky
    api_key: !secret forcastio_api
    update_interval:
      minutes: 10
    monitored_conditions:
      - summary
      - icon
      - precip_type
      - precip_intensity
      - precip_probability
      - temperature
      - apparent_temperature
      - wind_speed
      - cloud_cover
      - humidity
      - visibility
      - temperature_high
      - temperature_low
      - minutely_summary
      - hourly_summary
      - daily_summary

# Internet
  - platform: speedtest
    minute:
      - 0
      - 30
    monitored_conditions:
      - ping
      - download
      - upload

# Synology DSM
  - platform: synologydsm
    host: 192.168.131.2
    username: !secret nas_user
    password: !secret nas_passwd
    monitored_conditions:
      - cpu_total_load
      - cpu_1min_load
      - cpu_5min_load
      - memory_real_usage
      - network_up
      - network_down
      - disk_status
      - volume_percentage_used

# Travel Times
  - platform: waze_travel_time
    name: Home to IDX
    origin: zone.home
    destination: zone.idx
    region: 'US'
  - platform: waze_travel_time
    name: Home to Bend
    origin: zone.home
    destination: zone.bend
    region: 'US'
  - platform: waze_travel_time
    name: Home to Florence
    origin: zone.home
    destination: zone.florence
    region: 'US'
  - platform: waze_travel_time
    name: Home to Portland
    origin: zone.home
    destination: zone.portland
    region: 'US'
  - platform: waze_travel_time
    name: Home to Lincoln City
    origin: zone.home
    destination: zone.lincoln_city
    region: 'US'

# NZB Get
  - platform: nzbget
    host: 192.168.131.2
    port: 6789
#   username: apiuser
#   password: apipass
    monitored_variables:
      - average_download_rate
      - download_rate
      - download_paused
      - free_disk_space
      - remaining_size
      - uptime
      
# Harmony
  - platform: template
    sensors:
      living_room_remote_state:
        value_template: '{{ states.remote.living_room.attributes.current_activity }}'
        friendly_name: 'Current Activity:'

# Pollen
  - platform: pollen
    zip_code: "97404"
    monitored_conditions:
      - allergy_average_forecasted
      - allergy_average_historical
      - allergy_index_today
      - allergy_index_tomorrow
      - allergy_index_yesterday
      - disease_average_forecasted

# Air Quality
  - platform: waqi
    token: 4c430aede0b393e4baa425b9ca43dd5c9afa29df
    locations:
      - eugene

# Lyft and Uber
  - platform: lyft
    client_id: !secret lyft_client_id
    client_secret: !secret lyft_client_secret
    start_latitude: !secret me_lat
    start_longitude: !secret me_long
  - platform: uber
    server_token: !secret uber_client_id
    start_latitude: !secret me_lat
    start_longitude: !secret me_long

  - platform: template
    sensors:
      # simple bool for decided if the house is empty of residents
      home_empty:
        friendly_name: 'Are Derek and Bonnie Both Gone?'
        value_template: >
          {% if is_state("states.device_tracker.tile_keys_derek", "home") or is_state("states.device_tracker.tile_bonnies_keys", "home") %}
            true
          {% else %}
            false
          {% endif %}

# US Weather Service Emergency Data
# https://community.home-assistant.io/t/severe-weather-alerts-from-the-us-national-weather-service/71853
  - platform: rest
    resource: https://api.weather.gov/alerts/active/count
    name: NWS Alert Count
    value_template: >
      {% if value_json.zones.ORZ604 is defined %}
        {{ value_json.zones.ORZ604 }}
      {% elif value_json.zones.ORC039 is defined %}
        {{ value_json.zones.ORC039 }}
      {% else %}
        0
      {% endif %}
    #json_attributes:
    #  - event
    #  - description
    #  - instructions
    #  - expires
    headers:
      User-Agent: Homeassistant
      Accept: application/ld+json
    scan_interval: 300
      
  - platform: rest
    resource: https://api.weather.gov/alerts/active?zone=ORZ604,ORC039
    name: NWS Alert Event
    value_template: >
      {% if value_json.features[0] is defined %}
        {{ value_json['features'][0]['properties'].event }}
      {% else %}
        None
      {% endif %}
    json_attributes:
      - features
    #  - description
    #  - instructions
    #  - expires
    headers:
      User-Agent: Homeassistant
      Accept: application/geo+json
    scan_interval: 300